<!DOCTYPE html>
<html lang="en">
<head>
    <title>Job Queue Dashboard</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <div class="top-actions" id="top-actions" style="display:none;">
            <div id="welcome-text"></div>
            <button id="logout-button" class="btn-link">Logout</button>
        </div>
        <h1>Job Queue Dashboard</h1>

        <!-- Login screen -->
        <div id="login-section" class="section">
            <div class="login-box">
                <h2>Login</h2>
                <form id="login-form">
                    <label for="login-user">Username</label>
                    <input id="login-user" type="text" placeholder="Enter username" value="demo" />
                    <div style="margin-top:0.5em;">
                        <button type="submit">Login</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Dashboard content (hidden until logged in) -->
        <div id="dashboard-content" class="hidden">
            <!-- Submission form -->
            <div class="section">
                <h2>Submit Job</h2>
                <form id="submit-form" class="submit-form">
                    <!-- User is determined by login; removed input to avoid confusion -->

                    <div>
                        <label for="input-idempotency">Idempotency Key (optional)</label>
                        <input id="input-idempotency" type="text" placeholder="e.g. abc123" />
                    </div>
                    <div style="grid-column: 1 / -1;">
                        <label for="input-payload">Payload (JSON)</label>
                        <textarea id="input-payload" rows="6">{"task":"noop"}</textarea>
                    </div>
                    <div class="submit-actions">
                        <button id="submit-button" type="submit">Submit Job</button>
                        <div id="submit-result" class="submit-result"></div>
                    </div>
                </form>
            </div>

            <div class="section">
                <h2>Jobs <span id="job-count" class="count"></span></h2>
                <div id="jobs" class="job-list"></div>
                <div id="jobs-loading" class="loading" style="display:none;">Loading jobs...</div>
            </div>
            <div class="section">
                <h2>Dead Letter Queue <span id="dlq-count" class="count"></span></h2>
                <div id="dlq" class="job-list"></div>
                <div id="dlq-loading" class="loading" style="display:none;">Loading DLQ...</div>
            </div>
        </div>
    </div>
    <script src="app.js"></script>
</body>
</html>
